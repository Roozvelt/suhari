{% extends 'base.html' %}
{% block title %}–ö–∞—Ç–∞–ª–æ–≥ —Å—É—Ö–∞—Ä–∏–∫–æ–≤{% endblock %}

{% block content %}
    <h2 class="fw-bold mb-4">–ö–∞—Ç–∞–ª–æ–≥ —Å—É—Ö–∞—Ä–∏–∫–æ–≤</h2>
    <div class="row g-4">
        {% for product in products %}
            <div class="col-6 col-md-3">
                <div class="card border-0 bg-beige shadow-sm rounded-3 overflow-hidden h-100">
                    <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ -->
                    <div class="position-relative" style="height: 180px;">
                        <img src="{{ product.photo.url }}"
                             alt="{{ product.name }}"
                             class="w-100 h-100 object-fit-cover">
                    </div>

                    <!-- –¢–µ–ª–æ –∫–∞—Ä—Ç–æ—á–∫–∏ -->
                    <div class="card-body p-3 d-flex flex-column">
                        <form action="{% url 'shop:add_to_cart' product.id %}" method="post"
                              class="d-flex flex-column justify-content-between h-100 gap-2">
                            {% csrf_token %}
                            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ -->
                            <div class="mb-2">
                                <h5 class="card-title fs-6 fw-bold mb-2 text-dark">{{ product.name }}</h5>
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span class="fs-5 fw-bold text-brown">{{ product.price }} ‚ÇΩ</span>
                                    <span class="text-muted small">{{ product.weight }} –≥</span>
                                </div>
                            </div>

                            <!-- –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥—Ä–æ–±–Ω–µ–µ" -->
                            <a href="{% url 'shop:product_detail' product.pk %}"
                               class="btn btn-outline-brown btn-sm rounded-pill w-100 mb-2">
                                –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Ç–æ–≤–∞—Ä–µ
                            </a>

                            <!-- –°—á–µ—Ç—á–∏–∫ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ -->
                            <div class="quantity-control mb-2">
                                <div class="input-group input-group-sm quantity-selector">
                                    <button class="btn btn-outline-brown minus-btn" type="button">‚àí</button>
                                    <input type="number"
                                           name="quantity"
                                           value="1"
                                           min="1"
                                           max="99"
                                           class="form-control text-center border-brown"
                                           style="min-width: 40px;">
                                    <button class="btn btn-outline-brown plus-btn" type="button">+</button>
                                </div>
                            </div>

                            <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è -->
                            <button type="submit"
                                    class="btn btn-brown btn-sm w-100 rounded-pill fw-bold py-2">
                                {% if product in cart_items %}
                                    ‚úé –û–±–Ω–æ–≤–∏—Ç—å
                                {% else %}
                                    üõí –í –∫–æ—Ä–∑–∏–Ω—É
                                {% endif %}
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        {% empty %}
            <div class="col-12">
                <div class="alert alert-warning text-center">–¢–æ–≤–∞—Ä–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</div>
            </div>
        {% endfor %}
    </div>
{% endblock %}